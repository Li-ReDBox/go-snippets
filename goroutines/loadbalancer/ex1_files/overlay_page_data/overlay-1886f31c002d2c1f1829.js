(("undefined"!==typeof self?self:this).webpackChunkgumroad=("undefined"!==typeof self?self:this).webpackChunkgumroad||[]).push([[6372],{93939:(t,e,i)=>{var n,r;const s=i(68790);!function(){"use strict";n=[i(29076),i(69142),i(73395),i(47791),i(90273),i(98238),i(14804),i(43640),i(85161),i(82430),i(37619)],void 0===(r=function({default:t},e,i,{default:n},r,{default:o},{default:a},{default:u},{default:l},{default:d},{default:c}){t.initialize(),s.isLocalStorageAccessible()||$(".js-product-display").data("single-product-mode",!0),$(".js-product-display").data("single-product-mode")||e.attachTo(".js-bundle-button",{onMultiOverlay:!0}),i.attachTo(".js-login"),n.attachTo(document),r.attachTo(document),o.attachTo(document),a.attachTo(document),u.attachTo(document),l.attachTo(document),d.attachTo(document),c.attachTo(document)}.apply(e,n))||(t.exports=r)}()},30799:(t,e,i)=>{"use strict";i.d(e,{w:()=>n});const n=(t,e="*")=>{window.parent.postMessage(JSON.stringify(t),e)}},82681:(t,e,i)=>{"use strict";i.r(e);var n=i(62449),r=i(69623),s=i(89579),o=i(83408),a=i(54995),u=i(47115),l=i(34249),d=i(89584);e.default=function(){this.defaultAttrs({bundleDataHydrateDataSelector:".js-bundle-data-hydrate-holder",bundleCheckoutStore:void 0}),this.performBundleCheckoutAction=function(t){this.attr.bundleCheckoutStore.dispatch(t)},this.getIsForBundle=function(){return!0},this.getHasVariantOptions=function(){return!1},this.getIsSingleUnit=function(){return null},this.getIsRecurringBilling=function(){return!1},this.getZeroPlusEnabled=function(){return!1},this.getCustomizedPriceCentsAfterDiscount=function(){return null},this.getNumberOfLineItemsInBundle=function(){const t=this.attr.bundleCheckoutStore.getState();return u.wl.getAllLineItemsWithExtras(t).length},this.getUidsOfLineItemsInBundle=function(){const t=this.attr.bundleCheckoutStore.getState();return u.wl.getAllLineItemsWithExtras(t).map((([t])=>t.uid))},this.getHasLineItemsWithShipping=function(){const t=this.attr.bundleCheckoutStore.getState();return d.wl.getHasLineItemsThatRequireShippingInfo(t.paymentState)},this.getHasLineItemsWithRecurringBilling=function(){const t=this.attr.bundleCheckoutStore.getState();return d.wl.getHasLineItemsWithRecurringBilling(t.paymentState)},this.getHasLineItemsForPreorder=function(){const t=this.attr.bundleCheckoutStore.getState();return d.wl.getHasLineItemsForPreorder(t.paymentState)},this.getBundleUrlParams=function(){return JSON.parse(this.select("urlParamsSelector").val())},this.initiatePriceInformationUpdate=function(){const t=this.attr.bundleCheckoutStore.getState(),e=t.paymentState.shippingInformation.addressInput.zip,i=t.paymentState.shippingInformation.addressInput.country;u.wl.getAllLineItemsWithExtras(t).forEach((([t,n])=>{this.trigger("uiNeedsProductCustomerSurcharge",{uid:t.uid,externalId:t.externalId,permalink:t.permalink,priceCents:t.perceivedCents,quantity:t.quantity,sellerId:t.sellerId,postalCode:t.isPhysical?e:"",country:t.isPhysical?i:this.getTaxCountry()||"",vatId:this.getVatID()||"",isPhysical:t.isPhysical,isTaxExclusive:t.isTaxedExclusively})}))},this.totalBundlePriceCents=function(){return this.attr.bundleCheckoutStore.getState().paymentState.computed.sumUsdSurchargeData.totalCostBreakdown.totalPriceCentsBeforeShipping},this.getTotalShippingCents=function(){const t=this.attr.bundleCheckoutStore.getState();return d.wl.getTotalShippingInUSDCents(t.paymentState)},this.getIsFreePurchase=function(){const t=this.attr.bundleCheckoutStore.getState();return d.wl.getIsFreeCart(t.paymentState)},this.getVatID=function(){return d.wl.getVATID(this.attr.bundleCheckoutStore.getState().paymentState)},this.getTaxCountry=function(){return d.wl.getTaxCountry(this.attr.bundleCheckoutStore.getState().paymentState)},this.getIsGift=function(){return d.wl.getIsGift(this.attr.bundleCheckoutStore.getState().paymentState)},this.getIsNativePaypalPaymentDisabled=function(){const t=this.attr.bundleCheckoutStore.getState();return u.wl.getAllLineItemsWithExtras(t).some((([t,e])=>!e.supportsNativePaypalPayment))},this.getIsProcessingPayment=function(){const t=this.attr.bundleCheckoutStore.getState();return d.wl.getIsProcessingPayment(t.paymentState)},this.getEnteredEmail=function(){return this.attr.bundleCheckoutStore.getState().paymentState.email},this.hideGiftInputs=function(){this.performBundleCheckoutAction({type:"pass-through-payment-action",action:{type:"set-no-gift"}})},this.getCurrentUser=function(){return this.attr.user},this.setInitialEmailFromUser=function(){const t="email"in this.attr.user?this.attr.user.email:null;t&&this.performBundleCheckoutAction({type:"pass-through-payment-action",action:{type:"set-email",email:t}})},this.validateForPayment=function(t){const e=this.attr.bundleCheckoutStore.getState(),i=this.getIsFreePurchase(),n=this.getIsGift(),r=()=>{const t=`${this.attr.bundleCheckoutFormSelector} .required:visible, .required-placeholder:visible`;return this.validateRequiredInputs(t)},s=()=>{const t=u.wl.getFirstCustomFieldError(e);return null==t||(this.trigger("uiForceCheckoutComponentValidation",{field:{type:"custom-field",lineItemUid:t.lineItemUid,fieldName:t.fieldName}}),!1)},o=()=>!!d.wl.getIsEmailValid(e.paymentState)||(this.trigger("uiForceCheckoutComponentValidation",{field:"email"}),!1),a=()=>!!d.wl.getIsGifteeEmailValid(e.paymentState)||(this.trigger("uiForceCheckoutComponentValidation",{field:"giftee-email"}),!1),l=()=>{const t=d.wl.getFirstErrorInShippingAddress(e.paymentState);return null==t||(this.trigger("uiForceCheckoutComponentValidation",{field:t}),!1)},c=()=>this.validateCreditCardForm();switch(t){case"creditCard":return!!r()&&(!!s()&&(!!l()&&(!!o()&&(!(!i&&!c())&&!(n&&!a())))));case"paymentRequest":return!!s()}},this.payIfAllowed=function(t){return t&&t.preventDefault(),this.performBundleCheckoutAction({type:"pass-through-payment-action",action:{type:"start-payment-with-credit-card"}}),!1},this.getArePaymentsAllowed=function(){return!0},this.getShouldSkipShippingAddressVerification=function(){return s.default.isExternalPresentation()},this.updateCustomerSurchargeForBundle=function(t,e){this.performBundleCheckoutAction({type:"pass-through-payment-action",action:{type:"receive-surcharge-data-for-line-item",lineItemUid:e.uid,surchargeData:(0,l.FD)(e)}})},this.addProductToBundleList=function(t,e){this.performBundleCheckoutAction({type:"add-product-to-cart",product:e.product})},this.dispatchPrepareToTryAgain=function(){this.performBundleCheckoutAction({type:"prepare-to-try-again"})},this.dispatchPrepareReturnToCart=function(){this.performBundleCheckoutAction({type:"prepare-return-to-cart"})},this.disableGiftingInputsIfNeeded=function(){this.performBundleCheckoutAction({type:"pass-through-payment-action",action:{type:"disable-gift-inputs"}})},this.getLineItemInfoForNativePayPalCheckout=function(){const t=this.attr.bundleCheckoutStore.getState(),[e,i]=u.wl.forceFindLineItemWithExtras(t,d.wl.getFirstLineItemUid(t.paymentState));return{external_id:e.externalId,permalink:e.permalink,quantity:e.quantity,currency_code:e.currencyCode,price_cents:e.surchargeData.costBreakdown.totalPriceCentsBeforeShipping,shipping_cents:e.surchargeData.costBreakdown.totalShippingCents,tax_cents:e.surchargeData.costBreakdown.totalTaxCents,exclusive_tax_cents:e.surchargeData.costBreakdown.exclusiveTaxCents,vat_cents:e.surchargeData.costBreakdown.vatCents,exclusive_vat_cents:e.surchargeData.costBreakdown.exclusiveVatCents,tax_country:e.surchargeData.taxAndShipping.taxCountry,was_recommended:i.wasProductRecommended,total_cents:(0,l.Jk)(e.surchargeData.costBreakdown)}},this.activateRecaptcha=function(t){(0,r.default)({recaptchaElement:$("#payButtonRecaptcha"),callback:t})},this.uiStatePaymentNotAllowed=function(){},this.uiStateCardValidated=function(){this.select("bundledListContainerSelector").slideUp()},this.uiStatePurchaseProcessStarted=function({isPaymentRequest:t}){t||this.select("receiptContainerSelector").fadeIn(),this.showPaymentAsProcessing()},this.uiStateRecaptchaActivated=function(){this.select("bundlePayButtonSelector").prop("disabled",!0)},this.uiStateRecaptchaClosed=function(){this.resetPayButton()},this.uiStatePaymentProcessing=function(){this.showPayButtonAsProcessing()},this.getLegacyPaymentFormAttributes=function(){return{referrer:this.$node.find("input[name='referrer']").val(),plugins:this.$node.find("input[name='plugins']").val(),friend:this.$node.find("input[name='friend']").val(),url_parameters:this.$node.find("input[name='url_parameters']").val(),locale:this.$node.find("input[name='locale']").val(),save_card:this.$node.find("input[name='save_card']").prop("checked"),full_name:this.$node.find("input[name='full_name']").val(),cc_zipcode_required:this.select("ccZipcodeRequiredSelector").val(),cc_zipcode:this.select("ccZipcodeFieldSelector").val()}},this.getExtraAttributesForLineItem=function(t){const e=this.attr.bundleCheckoutStore.getState(),i=u.wl.maybeFindLineItemWithExtras(e,t);if(null==i)throw new Error("Invalid line item UID");const[n,r]=i;return{wasRecommended:r.wasProductRecommended,recommendedBy:r.recommendedBy}},this.initializeBundleCheckoutState=function(){const t=this.select("bundleDataHydrateDataSelector");if(null==t)throw new Error("Hydration data is missing for bundle");const e=t.data("bundle-checkout-data"),i=n.Qc(e,u.tH),r=(0,u.Gt)(i),{effectRunner:s,setDefaultShippingAddressFromUser:l,verifyShippingAddress:d}=(0,u.fA)({flightComponent:this,stateGetter:()=>this.attr.bundleCheckoutStore.getState(),stateDispatch:t=>this.performBundleCheckoutAction(t)});this.setDefaultShippingAddressFromUser=l,this.verifyShippingAddress=d,this.attr.bundleCheckoutStore=(0,a.A)(r,u.YN,(0,o.D)((({onAction:t,onChanged:e})=>{s({onAction:t,onChanged:e}),e((t=>t),"reference",(()=>{this.trigger(document,"uiSyncCheckoutBundleState",{state:this.attr.bundleCheckoutStore.getState()})}))}))),this.on(document,"uiPerformBundleCheckoutStateAction",((t,e)=>{t.preventDefault(),this.performBundleCheckoutAction(e.action)}))},this.after("initialize",(function(){this.initializeBundleCheckoutState(),this.disableGiftingInputsIfNeeded(),this.on("click",{bundlePayButtonSelector:this.payIfAllowed}),this.on(document,"dataCustomerSurcharge",this.updateCustomerSurchargeForBundle),this.on(document,"addProductToBundle",this.addProductToBundleList),this.on(document,"uiNeedsToGetPersistentBundle",(()=>{this.performBundleCheckoutAction({type:"fetch-persistent-bundle"})}))}))}},69142:(t,e,i)=>{"use strict";var n,r;n=[i(95040),i(82681),i(69285),i(44146),i(55526),i(38268),i(89741),i(62153)],void 0===(r=function(t,{default:e},{default:i},n,{default:r},s){return t((function(){this.defaultAttrs({bundleCircleSelector:".js-bundle-circle",bundleTooltipTriggerSelector:".js-bundle-tooltip-trigger",bundleCancelCheckoutButtonSelector:".js-bundle-cancel-trigger",bundlePayButtonSelector:".js-bundle-pay-trigger",productOrBundlePayButtonSelector:".js-bundle-pay-trigger",bundleToolTipSelector:".js-bundle-tool-tip",bundledListContainerSelector:".js-bundled-product-list-holder",bundleCheckoutFormSelector:".js-bundle-checkout-form",showingCheckout:!1,bundleCartSelector:".js-bundle-cart",bundleOverlaySelector:".js-bundle-overlay"}),this.showProductCountInCircle=function(){const t=this.getNumberOfLineItemsInBundle();t>0?(this.select("bundleCircleSelector").text(t),this.select("bundleTooltipTriggerSelector").addClass("showing"),this.select("bundleToolTipSelector").addClass("showing"),this.select("bundleOverlaySelector").addClass("bundle-overlay")):(this.select("bundleCircleSelector").text(""),!1===this.attr.isShowingReceipt&&(this.select("bundleTooltipTriggerSelector").removeClass("showing"),this.select("bundleToolTipSelector").removeClass("showing"),this.select("bundleOverlaySelector").removeClass("bundle-overlay")))},this.updateBundleButton=function(){this.setCardSaveRequired(this.bundleNeedsCardSaved()),this.attr.user&&this.attr.user.is_logged_in?(this.select("keepOnFileSelector").show(),this.select("saveCardSelector").prop("checked",!0)):(this.select("keepOnFileSelector").hide(),this.select("saveCardSelector").prop("checked",!1));const t=this.getNumberOfLineItemsInBundle();t>0&&(this.select("bundleCircleSelector").text(t),this.attr.showingCheckout&&"true"===$('meta[property="gr:paypal:pay_with_paypal_enabled"]').attr("value")&&(this.attr.nativePayPalPaymentDisabled?this.trigger("uiNeedsBraintreeClientTokenFetched",{isOverlay:this.attr.isOverlay,isMultiBuyEnabled:this.attr.onMultiOverlay||this.attr.isMultiBuyEnabled}):this.setupPayPalImplementations(null,{})),this.attr.showingCheckout?this.$node.addClass("showing-checkout").show():this.$node.removeClass("showing-checkout"),this.$node.addClass("showing-bundle").show()),this.showProductCountInCircle()},this.toggleBundleTooltip=function(t){t.preventDefault(),this.select("bundleToolTipSelector").toggleClass("showing"),this.select("bundleToolTipSelector").hasClass("showing")?(this.$node.addClass("showing-bundle"),this.select("bundleOverlaySelector").addClass("bundle-overlay"),this.trigger("uiNeedsToShrinkToBundleOpen")):(this.$node.removeClass("showing-bundle"),this.select("bundleOverlaySelector").removeClass("bundle-overlay"),this.trigger("uiNeedsToShrinkToBundleClose"))},this.hideBundle=function(t){this.select("bundleToolTipSelector").removeClass("showing"),this.$node.removeClass("showing-bundle"),this.select("bundleOverlaySelector").removeClass("bundle-overlay")},this.hideBundleAndShrinkOverlay=function(t){this.hideBundle(),this.trigger("uiNeedsToShrinkToBundleClose")},this.hideReceiptReturnToCart=function(){this.dispatchPrepareReturnToCart(),this.resetPayButton(),this.select("purchaseFormSelector").show(),this.select("bundleCancelCheckoutButtonSelector").show(),this.hideReceipt(),this.cancelBundleCheckout()},this.bundleNeedsCardSaved=function(){return this.getHasLineItemsWithRecurringBilling()||this.getHasLineItemsForPreorder()},this.startBundleCheckout=function(t){this.setDefaultShippingAddressFromUser(),this.showStripeElements(),this.setNativePayPalPaymentState(),this.trigger("uiNeedsToStartBundleCheckout"),this.attr.showingCheckout=!0,this.select("bundledListContainerSelector").slideUp(),this.select("bundleCheckoutFormSelector").slideDown(),this.updateBundleButton(),this.initiatePriceInformationUpdate()},this.setNativePayPalPaymentState=function(){this.attr.nativePayPalPaymentDisabled=!("false"===$(this.attr.metaNativePayPalPaymentDisabledSelector).attr("value"))||this.getIsNativePaypalPaymentDisabled()},this.cancelBundleCheckout=function(t){t&&t.preventDefault(),this.attr.showingCheckout=!1,this.select("bundledListContainerSelector").slideDown(),this.select("bundleCheckoutFormSelector").slideUp(function(){this.trigger("uiNeedsToCancelBundleCheckout")}.bind(this)),this.updateBundleButton(),this.initiatePriceInformationUpdate()},this.enablePaymentFormForRequiredPurchaseAction=function(){this.select("bundlePayButtonSelector").prop("disabled",!1).text(I18n.t("js.pay_prompt")),this.select("receiptContainerSelector").fadeOut()},this.showCompletedBundleReceipt=function(){this.showProductBundleReceipt(),this.showProductCountInCircle()},this.showProductBundleReceipt=function(){this.select("bundleCancelCheckoutButtonSelector").hide(),this.trigger("completedBundle"),setTimeout((()=>{this.showReceipt(!1)}),100),setTimeout((()=>{this.trigger(document,"uiNeedsToResizeBundleOverlay")}),200)},this.tryAgain=function(){this.resetPayButton(),this.dispatchPrepareToTryAgain(),this.select("purchaseFormSelector").show(),this.select("bundleCancelCheckoutButtonSelector").show(),this.hideReceipt(),this.trigger("uiNeedsToStartBundleCheckout"),this.updateBundleButton()},this.setCurrentUserInfo=function(t,e){this.attr.isCurrentUserSet||(this.attr.user=e,this.setCreditCard(),this.setInitialEmailFromUser(),this.attr.isCurrentUserSet=!0)},this.attachThirdPartyAnalytics=function(){i.attachTo(this.$node)},this.after("initialize",(function(){this.on(document,"dataCurrentUserInfo",this.setCurrentUserInfo),this.on(document,"uiThirdPartyAnalyticsEnabled",this.attachThirdPartyAnalytics),this.on(document,"uiShowOverlayCreditCardForm",this.startBundleCheckout),this.on(document,"uiShouldHideBundle",this.hideBundle),this.on(document,"uiNeedsToShowProductCountInCircle",this.showProductCountInCircle),this.on(document,"uiTransitionToTryAgainState",this.tryAgain),this.on("click",{bundleCancelCheckoutButtonSelector:this.cancelBundleCheckout,bundleTooltipTriggerSelector:this.toggleBundleTooltip,bundleCartSelector:this.toggleBundleTooltip,bundleOverlaySelector:this.hideBundleAndShrinkOverlay}),this.on(document,"uiBundleNeedsToShopMore",this.hideReceiptReturnToCart),this.on(document,"uiBundleNeedsToStartCheckout",this.startBundleCheckout),this.on(document,"uiBundleNeedsToCloseCartTooltip",this.hideBundleAndShrinkOverlay)}))}),e,n,r,s)}.apply(e,n))||(t.exports=r)},47791:(t,e,i)=>{"use strict";i.r(e);var n=i(95040),r=i.n(n),s=i(30799),o=i(85069),a=i.n(o);e.default=r()((function(){this.defaultAttrs({bundleCartSelector:".js-bundle-cart",bundleToolTipSelector:".js-bundle-tool-tip",footerSelector:".js-footer",loginSelector:".js-login",productContainerSelector:".js-product-row",productDisplaySelector:".js-product-display",productListSelector:".js-bundled-product-list",productSelector:".js-product",changedMindButtonSelector:".changed_mind_button",bundleHeightSpacing:65,bundleWidthSpacing:15,bundleMenuWidth:85,bundleMenuHeight:50,footerHeight:120,minLoginModalWidth:360,productParams:{permalink:""}}),this.cancelCheckout=function(){this.attr.checkingOut=!1,$("body").removeClass("checking-out showing-bundle"),setTimeout((()=>{this.shrinkToBundleOpen()}),350)},this.clickListener=function(t){const e=$(t.target||t.srcElement),i=["buy-form-main","bundle-container","product-row","js-login","street-address-checker"];if(!this.attr.checkingOut||e.hasClass("js-overlay-blocker")){for(let t of i)if(e.hasClass(t)||e.parents("."+t).length>0)return;this.attr.completedPurchase?this.minimize():this.shrinkToBundleOpen()}},this.completePurchase=function(t,e){this.attr.checkingOut=!1,this.attr.completedPurchase=!0},this.notifyParentPageOfPurchase=function(t,e){if(e.success){if(!this.overlayParentDomain)return;(0,s.w)(Object.assign({},e,{post_message_name:"sale"}),this.overlayParentDomain)}},this.getPersistentBundle=function(){this.trigger("uiNeedsToGetPersistentBundle"),setTimeout((()=>{this.productsInBundle().length>0&&this.shrinkToBundleOpen()}),100)},this.getProduct=function(t){this.attr.userGoogleAnalyticsClientId=t.googleAnalyticsClientId,this.attr.productParams={permalink:""};for(let e of l){const i=t[e];(!i||"string"!==typeof i&&"boolean"!==typeof i||"false"!==i.toString().toLowerCase())&&(this.attr.productParams[e]=i)}this.setDuration(),this.trigger(document,"uiNeedsAProduct",this.attr.productParams)},this.gotMessage=function(t){let e={};if(t.data)try{e=JSON.parse(t.data)}catch(i){}"overlayMethod"in e&&"string"===typeof e.overlayMethod&&e.overlayMethod in this&&this[e.overlayMethod](e.overlayArgs)},this.keyListener=function(t){"Escape"===t.key&&(t.stopPropagation(),this.minimize())},this.handleGetProductFailure=function(t,e){this.sendMethodToParent({parentMethod:"redirect",parentArgs:e.url})},this.maximize=function(){this.refreshPreview(),$("body").removeClass("gumroad-minimized"),this.select("productContainerSelector").addClass("showing"),this.trigger("uiNeedsToShowProductCountInCircle"),this.sendMethodToParent({parentMethod:"maximizeIframe",parentArgs:{width:`${$("body").width()}px`,height:`${$("body").height()+this.attr.footerHeight}px`}})},this.minimize=function(t){(!this.attr.checkingOut||null!=t&&null!=t.minimizeDimensions)&&($("body").addClass("gumroad-minimized"),this.select("productContainerSelector").addClass("not-showing"),this.trigger("uiNeedsToPauseVideo"),setTimeout((()=>{this.sendMethodToParent({parentMethod:"minimizeIframe",parentArgs:null==t?void 0:t.minimizeDimensions})}),300))},this.prepareProduct=function(t,e){this.removeProduct(),this.select("productDisplaySelector").html(e.html),this.select("productSelector").addClass("relative popped"),a().attachTo(this.attr.productContainerSelector,{incrementViewCountOnInit:!0,isMobile:void 0,isMultiBuyEnabled:!this.attr.singleProductMode,overlayEmail:this.attr.productParams.email,overlayOfferCode:this.attr.productParams.offerCodeName,overlayQuantity:this.attr.productParams.quantity,overlayPrice:this.attr.productParams.price,overlayVariant:this.attr.productParams.variant,overlayTier:this.attr.productParams.tier,overlayDuration:this.attr.productParams.duration,overlayRecommendedBy:this.attr.productParams.recommended_by,overlayUrlParams:this.attr.productParams.url_parameters,permalink:this.attr.productParams.permalink,userInfoToAdd:void 0,wantThis:this.attr.productParams.wanted,isOverlay:!0,userGoogleAnalyticsClientId:this.attr.userGoogleAnalyticsClientId}),this.showProduct()},this.productsInBundle=function(){const t=[];return this.select("productListSelector").find("li").each((function(e,i){t.push($(i).data("unique-permalink"))})),t},this.redirect=function(t,e){this.sendMethodToParent({parentMethod:"redirect",parentArgs:e.url})},this.refreshPreview=function(){this.trigger(document,"showPreview",void 0)},this.removeProduct=function(){a().teardownAll(),this.select("productDisplaySelector").empty()},this.sendMethodToParent=function(t){this.overlayParentDomain&&window.parent.postMessage(JSON.stringify(t),this.overlayParentDomain)},this.setOverlayParentDomain=function(t){this.overlayParentDomain=t,this.sendMethodToParent({parentMethod:"handshake"})},this.setDuration=function(){for(let e of u)if(this.attr.productParams[e]&&(t=this.attr.productParams.duration,!u.includes(t))){this.attr.productParams.duration=e;break}var t},this.showPaymentFormIfWanted=function(){this.attr.productParams.wanted&&this.trigger("uiShowOverlayCreditCardForm")},this.showProduct=function(){this.trigger("uiTriggerECommerceView"),this.select("footerSelector").toggle(!this.select("productContainerSelector").data("custom-web-branding"));const t=this.select("productSelector").data("is-published");this.attr.productParams.wanted&&t||this.maximize()},this.startCheckout=function(){"true"===$('meta[property="gr:paypal:pay_with_paypal_enabled"]').attr("value")&&this.trigger("uiNeedsBraintreeClientTokenFetched",{isOverlay:!0,isMultiBuyEnabled:!this.attr.singleProductMode}),this.attr.checkingOut=!0,$("body").addClass("showing-bundle checking-out"),setTimeout((()=>{this.shrinkToBundleOpen()}),350)},this.resizeOverlay=function(){const t=this.select("bundleToolTipSelector"),e={minimizeDimensions:{width:`${t.outerWidth()+this.attr.bundleWidthSpacing}px`,height:`${t.outerHeight()+this.attr.bundleHeightSpacing}px`}};this.minimize(e)},this.shrinkToBundleOpen=function(){this.productsInBundle().length>0?this.resizeOverlay():this.minimize(void 0)},this.shrinkOverlay=function(t,e){this.sendMethodToParent({parentMethod:"minimizeIframe",parentArgs:{width:`${t}px`,height:`${e}px`}})},this.shrinkToBundleClose=function(){this.shrinkOverlay(this.attr.bundleMenuWidth,this.attr.bundleMenuHeight)},this.hideOrClosePaymentForm=function(t){t.preventDefault(),this.attr.productParams.wanted?this.shrinkToBundleOpen():this.trigger(document,"uiShowProductMain",void 0)},this.after("initialize",(function(){this.attr.singleProductMode=$(".js-product-display").data("single-product-mode"),$("body").addClass("gumroad-minimized"),window.addEventListener?window.addEventListener("message",(t=>{this.gotMessage(t)}),!1):"attachEvent"in window&&window.attachEvent&&window.attachEvent("onmessage",(t=>{this.gotMessage(t)}),!1),this.trigger(document,"uiSetOverlayPageShareUrl",{url:this.select("productDisplaySelector").data("overlay-share-url")}),this.on(document,"dataGotAProduct",this.prepareProduct),this.on(document,"dataGetProductFailure",this.handleGetProductFailure),this.on(document,"uiNotifyOfCompletedCartPurchase",this.completePurchase),this.on(document,"uiNotifyOfCompletedLineItemPurchase",this.notifyParentPageOfPurchase),this.on("click",{changedMindButtonSelector:this.hideOrClosePaymentForm}),this.on(document,"uiCanShowPaymentForm",this.showPaymentFormIfWanted),this.on(document,"uiCannotShowPaymentForm",this.maximize),this.on(document,"uiNeedsToCancelBundleCheckout",this.cancelCheckout),this.on(document,"uiNeedsToStartBundleCheckout",this.startCheckout),this.on(document,"uiNeedsToRedirectOverlayFromReceipt",this.redirect),this.on(document,"uiNeedsToHideProductOverlay",this.shrinkToBundleOpen),this.on(document,"uiNeedsToShrinkToBundleClose",this.shrinkToBundleClose),this.on(document,"uiNeedsToShrinkToBundleOpen",this.shrinkToBundleOpen),this.on(document,"uiNeedsToResizeBundleOverlay",this.resizeOverlay),this.on(document,"keydown",this.keyListener),this.on(document,"click",this.clickListener)}))}));const u=["monthly","quarterly","biannually","yearly"],l=[...u,"permalink","offerCodeName","locale","wanted","email","gift","recommended_by","quantity","price","variant","tier","duration","url_parameters","affiliate_id"]},89579:(t,e,i)=>{"use strict";i.r(e);const n={isOverlay:function(){return"overlay-page"===$("body").attr("id")},isModal:function(){return!!window.location.search.match(/as_modal/)&&top!=self},isEmbed:function(){return!!window.location.search.match(/as_embed/)&&top!=self},isOutboundEmbed:function(){return!!window.location.search.match(/outbound_embed/)&&top!=self},isRecommended:function(){return!!window.location.search.match(/recommended_by/)},isExternalPresentation:function(){return this.isOutboundEmbed()||this.isEmbed()||this.isModal()||this.isOverlay()}};e.default=n}},t=>{t.O(0,[8782],(()=>{return e=93939,t(t.s=e);var e}));t.O()}]);